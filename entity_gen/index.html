<!DOCTYPE html>
<html>
  <head>
<!--      <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>-->
			<script src="aframe.min.js"></script>
			<!-- NB defer is crucial here! -->
    	<script src="sphereFly.js" defer></script>
			<!--OK, this works better without defer.-->
			<script src="block_farm.js"></script>
    	<!-- NB must not defer these scripts, else
            text will not render to HUD -->
      <script src="main.js"></script>
      <script src="loco.js"></script>

  </head>

  <body>
    <a-scene>
		<!--Fog...-->
		<!--    
		<a-scene fog="type:linear;color:#00FFEF;far:128;"> 
		-->
			<!-- Allow assets time to load.-->
      <a-assets timeout="10000">

				<!-- Crossorigin to permit loading images -->
				<img crossorigin="local" id="imgJojo2" src="jojo_panda.png">
				<img crossorigin="local" id="imgBloop1" src="bloop_fish_1.png">
  		</a-assets>
      
			<!--Let's try to build an 'empty' with farm.-->
			<a-entity farm></a-entity>
			
      <!-- Blue point light, 5 meters in the air. -->
			<a-light type="point" color="white" 
				 position="0 22 20"></a-light>
      
      <a-light type="ambient" color="pink" position="0 22 -20"></a-light>
      
      <a-entity id="rig" movement-controls>
			<!-- 360-degree image. Default rad is 10-->
  		<a-sky id="image-360" radius="1042" 
				 src="#imgJojo2"></a-sky>
      <a-entity id="subject" 
                camera
                position="0 1.6 0"
                look-controls  
                locomotion="Engine on!" 
                log-position-data="output:#hud">
        
        <a-entity
          cursor="fuse: true;fuseTimeout: 2000;"
          raycaster="objects:.clickable;"
          geometry="primitive:plane; width:0.1;  height:0.1;"
          material="color:white;wireframe:true;"
          position="0 0 -3;"
          animation__fusing="property:rotation; from: 0 0 0; to: 0 0 360; dur: 2000; startEvents: fusing;"
          animation__reset="property:scale; from: 0.7 0.7 0.7; to: 1 1 1; dur: 333; startEvents: mouseleave;"
         ></a-entity>
     
        <a-plane id="hud"
								 visible="true"
								 alphaTest="0.2"
                 position = "-2 1 -3" 
                 rotation = "25 25 0" 
  text="color:yellow; xOffset: 0.5; width:1.9;" 
                 material="shader:flat;color:blue">
        </a-plane>
      </a-entity> <!-- rig end -->
      </a-entity> <!-- camera end -->

			<a-sphere class="clickable" position="4.2 -5 -5" radius="2" color="#00EEFF" shadow id="mySphere"></a-sphere>
      
      <a-sphere class="clickable" position="-4 3 -9" radius="1" color="rgb(0,255,0)" shadow id="mySphere2"></a-sphere>
			
			<!-- Giant paintings -->
			<a-box position="0 8 12" scale="10 5 1" material="src: #imgJojo2"></a-box>
			<a-box position="-20 8 12" scale="30 20 1" material="src: #imgBloop1"></a-box>

			<!-- tunnel -->
			<a-torus class="clickable" position="0 4 -8" radius="0.5" height="1.5" color="#440044"></a-torus>
			<a-torus class="clickable" position="0 4 -9" radius="0.5" height="1.5" color="#880088"></a-torus>
			<a-torus class="clickable" position="0 4 -10" radius="0.5" height="1.5" color="#FF00FF"></a-torus>
<!--       <a-plane position="0 0 -4" rotation="-90 0 0" width="42" height="42" color="#7BC8A4"></a-plane> -->
<!--       <a-sky color="#ECECEC"></a-sky> -->
    </a-scene>
  </body>
</html>